---
title: Vite / Jest í™˜ê²½ êµ¬ì„±í•˜ê¸°
description: Viteì™€ Jestë¡œ React TDD í™˜ê²½êµ¬ì„±í•˜ê¸°
date: 2024-03-19
thumbnail: /blogImages/2024/2024_03/2024_03_19/2024_03_19_(1).webp
category:
  - React
series: TDD ë½€ê°œê¸°
---

## ì„œë¡ 

êµ¬ë¦„í†¤ íŠ¸ë ˆì´ë‹ì„ ë“£ë˜ ë„ì¤‘, ë¦¬ì•¡íŠ¸ ê°•ì˜ì— TDDë¥¼ ìœ„í•œ ë‚´ìš©ì´ ë“¤ì–´ìˆì—ˆìŠµë‹ˆë‹¤. ê·¸ê±°ë¥¼ ë³¸ ìˆœê°„ ì´ì œëŠ” ë”ì´ìƒ ë¬¼ëŸ¬ë‚  ê³³ì´ ì—†ìŒì„ ì•Œì•„ë²„ë ¸ìŠµë‹ˆë‹¤.
TDDì˜ ë°”ëŒì´ ë¶ˆê³ ìˆê³  ê·¸ê²Œ í”„ë¡ íŠ¸ì—”ë“œë¼ê³ í•´ì„œ ë…¼ì™¸ê°€ ë  ìˆ˜ëŠ” ì—†ìœ¼ë‹ˆê¹Œìš” í‘í‘..

ì˜¤ëŠ˜ í¬ìŠ¤íŒ…ì€ Jest, React Testing Library(RTL)ì— ëŒ€í•œ ê°„ë‹¨í•œ ì†Œê°œ ë° Viteì™€ Jestë¥¼ í†µí•œ ë¦¬ì•¡íŠ¸ í…ŒìŠ¤íŒ… í™˜ê²½ì„ êµ¬ì„±í•˜ê¸°ë¥¼ ë‹¤ë£° ê²ƒ ì…ë‹ˆë‹¤.
ë‹¤ìŒ í¬ìŠ¤íŒ…ì—ì„œëŠ” Vitestë¥¼ í†µí•œ ë¦¬ì•¡íŠ¸ í…ŒìŠ¤íŒ… í™˜ê²½ êµ¬ì„±ì„ ë‹¤ë£° ê²ƒ ê°™ë„¤ìš”.

ìë£Œë¥¼ ë³´ì‹¤ ë•Œ ì°¸ê³ í•˜ì…”ì•¼ í•  ì ì€, ë¸”ë¡œê·¸ í¬ìŠ¤íŒ…ì€ ì‹œê°„ì´ ì§€ë‚˜ë©´ **Outdate**ë˜ê¸°ë•Œë¬¸ì—, ì‹œê°„ì´ ì–´ëŠì •ë„ ì§€ë‚¬ë‹¤ë©´ ë³¸ í¬ìŠ¤íŠ¸ë§Œ ì°¸ê³ í•˜ì—¬ í™˜ê²½ì„ êµ¬ì„±í•˜ê¸°ì—ëŠ” ë¬¸ì œê°€ ìˆì„ ìˆ˜ ìˆìŒì„ ì°¸ê³ í•´ì£¼ì„¸ìš”.

## Jestë€?

JestëŠ” ë©”íƒ€(êµ¬ í˜ì´ìŠ¤ë¶)ì—ì„œ ë§Œë“  í…ŒìŠ¤íŒ… í”„ë ˆì„ì›Œí¬ì…ë‹ˆë‹¤.

Jest ë“±ì¥ ì´ì „ì—ëŠ” Test Runner(Mocha, Jasmine, ...), Test Matcher(Chai, Expect, ...), Test Mock(Sinon, TestDouble, ...)ì„ ëª¨ë‘ ê°ê¸° ë‹¤ë¥¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•´ì•¼í–ˆìœ¼ë‚˜,
JestëŠ” ìœ„ì— ì„œìˆ í•œ Test Runner, Test Matcher, Test Mockì„ ëª¨ë‘ ì œê³µí•˜ê³ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ ë§ì´ í¸ë¦¬í•˜ë‹¤ê³  í•  ìˆ˜ ìˆê² ìŠµë‹ˆë‹¤ :)
ë˜ ì‚¬ìš©ìê°€ ë§¤ìš° ë§ê¸°ë•Œë¬¸ì— ê´€ë ¨ ìë£Œë„ ë°©ëŒ€í•œ í¸ì´ê¸°ë•Œë¬¸ì— ì •ë³´ë¥¼ ì‰½ê²Œ ì–»ì„ ìˆ˜ ìˆë‹¤ëŠ” ì¥ì  ë˜í•œ ê°€ì§€ê³ ìˆìŠµë‹ˆë‹¤.

## í…ŒìŠ¤íŠ¸ì˜ ì¢…ë¥˜

í…ŒìŠ¤íŠ¸ì—ëŠ” ì—¬ëŸ¬ê°€ì§€ ì¢…ë¥˜ê°€ ìˆìŠµë‹ˆë‹¤. **Cypress**ì™€ ê°™ì€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í†µí•œ **E2E í…ŒìŠ¤íŠ¸**ì™€ **Jest**ì™€ ê°™ì€ ë¼ì´ë¸ŒëŸ¬ë¦¬/í”„ë ˆì„ì›Œí¬ë¥¼ í†µí•œ **ìœ ë‹›/í†µí•© í…ŒìŠ¤íŠ¸**ê°€ ìˆìŠµë‹ˆë‹¤.

### ìœ ë‹›/í†µí•© í…ŒìŠ¤íŠ¸

**ìœ ë‹› í…ŒìŠ¤íŠ¸**ëŠ” í”„ë¡œê·¸ë¨ì˜ ê¸°ë³¸ ë‹¨ìœ„ê°€ ë˜ëŠ” ëª¨ë“ˆì„ í…ŒìŠ¤íŠ¸í•˜ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤. ì¦‰, ìµœì†Œí•œì˜ ë‹¨ìœ„ì¸ utilí•¨ìˆ˜, custom hook, í•˜ë‚˜ì˜ ì»´í¬ë„ŒíŠ¸ ë“±ì´ ê·¸ ëŒ€ìƒì´ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
**í†µí•© í…ŒìŠ¤íŠ¸**ëŠ” ì—¬ëŸ¬ê°œì˜ ìš”ì†Œë¥¼ í•¨ê»˜ ë™ì‘ì‹œì¼°ì„ ë•Œì˜ í…ŒìŠ¤íŠ¸ì…ë‹ˆë‹¤. ëª¨ë“ˆ ê°„ì˜ ìƒí˜¸ì‘ìš©ì´ ì •ìƒì ìœ¼ë¡œ ìˆ˜í–‰ë˜ëŠ”ì§€ ê²€ì¦í•˜ëŠ”ê²Œ ì£¼ëœ ëª©í‘œì…ë‹ˆë‹¤.

### E2E í…ŒìŠ¤íŠ¸

**E2E(End To End) í…ŒìŠ¤íŠ¸**ë€, ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ íë¦„ì„ ì²˜ìŒë¶€í„° ëê¹Œì§€ í…ŒìŠ¤íŠ¸í•˜ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.
ìœ ë‹› í…ŒìŠ¤íŠ¸ì™€ í†µí•© í…ŒìŠ¤íŠ¸ê°€ ëª¨ë“ˆì˜ ë¬´ê²°ì„±ì„ ì¦ëª…í•œë‹¤ë©´, E2Eí…ŒìŠ¤íŠ¸ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ ë™ì‘ì„ í…ŒìŠ¤íŠ¸í•˜ë©° ê¶ê·¹ì ìœ¼ë¡œëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë¬´ê²°ì„±ì„ ì¦ëª…í•œë‹¤ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## Reactì—ì„œì˜ í…ŒìŠ¤íŠ¸

![RTL](</blogImages/2024/2024_03/2024_03_19/2024_03_19_(2).webp>)

Reactì—ì„œ ì¶”ì²œë˜ëŠ” í…ŒìŠ¤íŠ¸ ë„êµ¬ëŠ” ë°”ë¡œ **React Testing Library** ì…ë‹ˆë‹¤. React Testing Library(RTL)ë¥¼ ì‚¬ìš©í•˜ë©´ ì‰½ê²Œ Reactì˜ í…ŒìŠ¤íŠ¸ë¥¼ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

RTLì— ëŒ€í•´ì„œ ì¡°ê¸ˆ ë” ì´ì•¼ê¸°ë¥¼ í•´ë³´ìë©´, ì›ë˜ RTL ì´ì „ì—ëŠ” Airbnbì˜ **Enzyme**ì´ë¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì¡´ì¬í–ˆìŠµë‹ˆë‹¤.
RTLê³¼ Enzymeì˜ ì°¨ì´ì ì€, Enzymeì€ í…ŒìŠ¤íŠ¸ë¥¼ ë Œë”ë§ í•  ë•Œ ê°€ìƒ DOMì— ë Œë”ë§ì„ í•˜ê³  RTLì€ ì‹¤ì œ DOM ë…¸ë“œì— ë Œë”ë§ì„ í•œë‹¤ëŠ” ì  ì…ë‹ˆë‹¤.
ê·¸ë ‡ê¸°ë•Œë¬¸ì— RTLì€ **ì‚¬ìš©ìê°€ ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰í•˜ëŠ” ì‹¤ì œ í™˜ê²½ê³¼ ë” ìœ ì‚¬í•œ í™˜ê²½ì—ì„œ í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.**

ì €ëŠ” ì´ ì  ë•Œë¬¸ì— RTLì´ Enzymeë³´ë‹¤ í˜„ì¬ ë” ì¸ê¸°ê°€ ìˆì§€ ì•Šì€ê°€ ìƒê°í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì•„ë˜ ê¸€ ë˜í•œ í•œë²ˆ ì½ì–´ë³´ì‹œëŠ” ê²ƒì„ ì¶”ì²œë“œë¦½ë‹ˆë‹¤ :)

- [[ToastUI] React Testing Libraryë¥¼ ì´ìš©í•œ ì„ ì–¸ì ì´ê³  í™•ì¥ ê°€ëŠ¥í•œ í…ŒìŠ¤íŠ¸](https://ui.toast.com/posts/ko_20210630)

## Viteì™€ Jestë¥¼ í†µí•œ React í…ŒìŠ¤íŠ¸ í™˜ê²½ êµ¬ì¶•í•˜ê¸°

ê·¸ëŸ¼, í˜„ì¬ reactë¥¼ ì‹œì‘í•  ë•Œ ê°€ì¥ ë§ì´ ì‚¬ìš©ë˜ëŠ” Viteì™€ Jestë¥¼ í†µí•œ React í…ŒìŠ¤íŠ¸ í™˜ê²½ì„ êµ¬ì¶•í•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.
ì „ë°˜ì ì¸ ì„¤ì •ì€ í•˜ë‹¨ì˜ ë§í¬ë¥¼ ì°¸ê³ í•˜ì—¬ ì´ë£¨ì–´ì§€ë‚˜, **2024ë…„ í˜„ì¬ ë°”ë€ ë¶€ë¶„ì„ ë°˜ì˜í•˜ì˜€ìœ¼ë©° ë³¸ ì„¤ì •ì—ì„œëŠ” Eslint ì„¤ì •ë„ í•¨ê»˜ ì§„í–‰í•©ë‹ˆë‹¤**

ì„¤ëª…ì€ viteë¡œ í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í–ˆë‹¤ê³  ê°€ì •í•˜ê³  ì§„í–‰ë©ë‹ˆë‹¤.

- [[Kai Song] Vite í”„ë¡œì íŠ¸ì— Jest ì¶”ê°€í•˜ê¸°](https://velog.io/@thdrldud369/Vite-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8%EC%97%90-jest-%EC%B6%94%EA%B0%80%ED%95%98%EA%B8%B0)

### 1. ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜

í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤.

```bash showLineNumbers
npm install -D jest @types/jest ts-node ts-jest @testing-library/react identity-obj-proxy jest-environment-jsdom @testing-library/jest-dom jest-svg-transformer
npm install -D eslint-plugin-testing-library eslint-plugin-jest-dom
```

### 2. package.json ìˆ˜ì •

**package.json**ì— ë‹¤ìŒ ë‚´ìš©ì„ ì¶”ê°€í•©ë‹ˆë‹¤.

```json showLineNumbers
"scripts": {
    ...
    "test": "jest"
}
```

### 3. jest ì„¤ì •íŒŒì¼ ìƒì„±

ë£¨íŠ¸í´ë”ì— **jest.setup.ts** íŒŒì¼ì„ ìƒì„±í•´ì¤ë‹ˆë‹¤.

```ts showLineNumbers
import '@testing-library/jest-dom'
```

ë£¨íŠ¸í´ë”ì— **jest.config.js** íŒŒì¼ì„ ìƒì„±í•´ì¤ë‹ˆë‹¤.

```js showLineNumbers
export default {
  testEnvironment: 'jsdom',
  transform: {
    '^.+\\.tsx?$': 'ts-jest',
  },
  moduleNameMapper: {
    '^.+\\.svg$': 'jest-svg-transformer',
    '\\.(css|less|sass|scss)$': 'identity-obj-proxy',
  },
  setupFilesAfterEnv: ['<rootDir>/jest.setup.ts'],
}
```

### 4. tsconfig ì„¸íŒ…

**tsconfig.json**ì— ë‹¤ìŒê³¼ ê°™ì€ ë‚´ìš©ì„ ì¶”ê°€í•©ë‹ˆë‹¤.

```json showLineNumbers
{
  "compilerOptions": {
    ...,
    "esModuleInterop": true
  }
}
```

### 5. eslint ì„¸íŒ…í•˜ê¸°

**.eslintrc.cjs**ë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ìˆ˜ì •í•©ë‹ˆë‹¤.

```cjs showLineNumbers {7, 8, 9, 13}
module.exports = {
  root: true,
  env: { browser: true, es2020: true },
  extends: [
    'eslint:recommended',
    'plugin:@typescript-eslint/recommended',
    'plugin:react-hooks/recommended',
    'plugin:testing-library/react',
    'plugin:jest-dom/recommended',
  ],
  ignorePatterns: ['dist', '.eslintrc.cjs'],
  parser: '@typescript-eslint/parser',
  plugins: ['react-refresh', 'testing-library', 'jest-dom'],
  rules: {
    'react-refresh/only-export-components': [
      'warn',
      { allowConstantExport: true },
    ],
  },
}
```

### 6. í…ŒìŠ¤íŠ¸ ì½”ë“œ ì¶”ê°€í•˜ê¸°

src ë””ë ‰í† ë¦¬ì— **\_\_tests\_\_** ë””ë ‰í† ë¦¬ë¥¼ ë§Œë“¤ê³  **App.test.tsx**ë¥¼ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤.

```tsx showLineNumbers
// Imports
import { render, screen, fireEvent } from '@testing-library/react'

// To Test
import App from '../App'

// Tests
test('Renders main page correctly', async () => {
  // Setup
  render(<App />)
  const buttonCount = await screen.findByRole('button')
  const codeCount = screen.queryByText(/count is/)

  // Pre Expecations
  expect(buttonCount.innerHTML).toBe('count is 0')
  // Instead of:
  // expect(codeCount).toBeNull();
  expect(codeCount).not.toBeInTheDocument()

  // Init
  fireEvent.click(buttonCount)
  fireEvent.click(buttonCount)

  // Post Expectations
  expect(buttonCount.innerHTML).toBe('count is 2')
  expect(screen.getByText(/The count is now:/)).toBeInTheDocument()
})
```

ì´ ë¶€ë¶„ì—ì„œ **toBeInTheDocument** íŒŒíŠ¸ ts ì—ëŸ¬ê°€ ë°œìƒí•  ìˆ˜ ìˆëŠ”ë°, ì´ ë•ŒëŠ” **tsconfigì— ë‹¤ìŒ ì†ì„±ì„ ì¶”ê°€í•´ì£¼ì‹œë©´ ë©ë‹ˆë‹¤.**

- [Property 'toBeInTheDocument' does not exist on type JestMatchers](https://github.com/testing-library/jest-dom/issues/546#issuecomment-1800436478)

```json showLineNumbers
{
  "compilerOptions": {
    ...,
    "types": ["@testing-library/jest-dom"]
  }
}
```

### 7. App.tsx ë‚´ìš© ë³€ê²½í•˜ê¸°

í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ **App.tsx**ì˜ ë‚´ìš©ì„ ë³€ê²½í•´ì¤ë‹ˆë‹¤.

```tsx showLineNumbers
import { useState } from 'react'
import reactLogo from './assets/react.svg'
import viteLogo from '/vite.svg'
import './App.css'

function App() {
  const [count, setCount] = useState(0)

  return (
    <>
      <div>
        <a href="https://vitejs.dev" target="_blank">
          <img src={viteLogo} className="logo" alt="Vite logo" />
        </a>
        <a href="https://react.dev" target="_blank">
          <img src={reactLogo} className="logo react" alt="React logo" />
        </a>
      </div>
      <h1>Vite + React1</h1>
      <div className="card">
        <button onClick={() => setCount((count) => count + 1)}>
          count is {count}
        </button>
        {count > 0 ? (
          <p>
            <code>The count is now: {count}</code>
          </p>
        ) : null}
        <p>
          Edit <code>src/App.tsx</code> and save to test HMR
        </p>
      </div>
      <p className="read-the-docs">
        Click on the Vite and React logos to learn more
      </p>
    </>
  )
}

export default App
```

### ê²°ê³¼

![TEST](</blogImages/2024/2024_03/2024_03_19/2024_03_19_(3).webp>)

## ëìœ¼ë¡œ

í•´ë‹¹ ì‹¤ìŠµ ìë£Œë¥¼ ê¹ƒí—ˆë¸Œì— ë‚¨ê²¨ë†¨ìŠµë‹ˆë‹¤. ìì„¸í•œ ì½”ë“œëŠ” í•´ë‹¹ ë ˆí¬ì§€í† ë¦¬ë¥¼ ì°¸ì¡°í•´ì£¼ì‹œë©´ ë˜ê² ìŠµë‹ˆë‹¤:)

- [[SWARVY] Vite_Jest Preset](https://github.com/SWARVY/Vite_Jest)

## ì°¸ê³ 

- [[Inpa Dev] ğŸ“š JEST ì†Œê°œ & ê¸°ë³¸ ì‚¬ìš©ë²• ì •ë¦¬](https://inpa.tistory.com/entry/JEST-%F0%9F%93%9A-jest-%EB%AC%B8%EB%B2%95-%EC%A0%95%EB%A6%AC)
- [[Kakao Entertainment] E2E í…ŒìŠ¤íŠ¸ ë„ì… ê²½í—˜ê¸°](https://fe-developers.kakaoent.com/2023/230209-e2e/)
- [[Jane_Log] í”„ë¡ íŠ¸ì—”ë“œì—ì„œ TDD ê²½í—˜í•´ë³´ê¸° (1) TDDë€?](https://velog.io/@hamjw0122/FE-%ED%94%84%EB%A1%A0%ED%8A%B8%EC%97%94%EB%93%9C%EC%97%90%EC%84%9C-TDD-%EA%B2%BD%ED%97%98%ED%95%B4%EB%B3%B4%EA%B8%B0-1-TDD%EB%9E%80)
